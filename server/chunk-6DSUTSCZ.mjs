import './polyfills.server.mjs';
import{d as V}from"./chunk-NGY6VZLR.mjs";import{a as W}from"./chunk-FCBA7MJ6.mjs";import{t as H,u as N,v as u,w as F,x as b,y as U}from"./chunk-NGD6FO5T.mjs";import{T as a,W as x,Y as i,Z as D,gc as $,la as L,n as S}from"./chunk-LWOIB4PS.mjs";var M=class n{localStorage=i(W);accessToken=L(this.localStorage.getItem("access_token"));router=i(V);isLoggedIn=$(()=>this.accessToken()!=null);setTokens(t,e){this.localStorage.setItem("access_token",t),this.localStorage.setItem("refresh_token",e),this.accessToken.set(t)}deleteTokens(){this.localStorage.removeItem("access_token"),this.localStorage.removeItem("refresh_token"),this.accessToken.set(null)}logout(){this.deleteTokens(),this.router.navigate(["/"]).then(console.info)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var l=new x("BASE_PATH_DEFAULT",{providedIn:"root",factory:()=>"/api"}),O=new x("HTTP_INTERCEPTORS_DEFAULT",{providedIn:"root",factory:()=>[]}),c=new N(()=>"default");var R=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}token(t,e,r,o,s,p,v,m,B,f){let K=`${this.basePath}/api/token`,g;f?.headers instanceof H?g=f.headers:g=new H(f?.headers),g.has("Content-Type")||(g=g.set("Content-Type","application/x-www-form-urlencoded"));let y=new URLSearchParams;e!=null&&y.append("client_id",String(e)),r!=null&&y.append("client_secret",String(r)),o!=null&&y.append("code",String(o)),t!=null&&y.append("grant_type",String(t)),s!=null&&y.append("password",String(s)),p!=null&&y.append("redirect_uri",String(p)),v!=null&&y.append("refresh_token",String(v)),m!=null&&y.append("username",String(m));let X={observe:B,headers:g,reportProgress:f?.reportProgress,withCredentials:f?.withCredentials,context:this.createContextWithClientId(f?.context)};return this.httpClient.post(K,y.toString(),X)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var T=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}authorise(t,e){let r=`${this.basePath}/api/authorize`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.get(r,o)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var j=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}logout(t,e){let r=`${this.basePath}/secured/logout`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.post(r,null,o)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var P=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}upsert(t,e,r){let o=`${this.basePath}/api/v0/org`,s={observe:e,reportProgress:r?.reportProgress,withCredentials:r?.withCredentials,context:this.createContextWithClientId(r?.context)};return this.httpClient.post(o,t,s)}remove(t,e,r){let o=`${this.basePath}/api/v0/org/${t}`,s={observe:e,reportProgress:r?.reportProgress,withCredentials:r?.withCredentials,context:this.createContextWithClientId(r?.context)};return this.httpClient.delete(o,s)}readMany(t,e){let r=`${this.basePath}/api/v0_public/org`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.get(r,o)}read(t,e,r){let o=`${this.basePath}/api/v0_public/org/${t}`,s={observe:e,reportProgress:r?.reportProgress,withCredentials:r?.withCredentials,context:this.createContextWithClientId(r?.context)};return this.httpClient.get(o,s)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var E=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}upsert(t,e,r){let o=`${this.basePath}/api/v0/profile`,s={observe:e,reportProgress:r?.reportProgress,withCredentials:r?.withCredentials,context:this.createContextWithClientId(r?.context)};return this.httpClient.post(o,t,s)}remove(t,e){let r=`${this.basePath}/api/v0/profile`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.delete(r,o)}read(t,e){let r=`${this.basePath}/api/v0_public/profile`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.get(r,o)}readMany(t,e){let r=`${this.basePath}/api/v0_public/profiles`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.get(r,o)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var _=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}upsert(t,e,r,o){let s=`${this.basePath}/api/v0/org/${t}/repo`,p={observe:r,reportProgress:o?.reportProgress,withCredentials:o?.withCredentials,context:this.createContextWithClientId(o?.context)};return this.httpClient.post(s,e,p)}remove(t,e,r,o){let s=`${this.basePath}/api/v0/org/${t}/repo/${e}`,p={observe:r,reportProgress:o?.reportProgress,withCredentials:o?.withCredentials,context:this.createContextWithClientId(o?.context)};return this.httpClient.delete(s,p)}readMany(t,e,r){let o=`${this.basePath}/api/v0_public/org/${t}/repo`,s={observe:e,reportProgress:r?.reportProgress,withCredentials:r?.withCredentials,context:this.createContextWithClientId(r?.context)};return this.httpClient.get(o,s)}read(t,e,r,o){let s=`${this.basePath}/api/v0_public/org/${t}/repo/${e}`,p={observe:r,reportProgress:o?.reportProgress,withCredentials:o?.withCredentials,context:this.createContextWithClientId(o?.context)};return this.httpClient.get(s,p)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var q=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}upsert(t,e,r,o,s){let p=`${this.basePath}/api/v0/org/${t}/repo/${e}/history`,v={observe:o,reportProgress:s?.reportProgress,withCredentials:s?.withCredentials,context:this.createContextWithClientId(s?.context)};return this.httpClient.post(p,r,v)}readMany(t,e,r,o){let s=`${this.basePath}/api/v0_public/org/${t}/repo/${e}/history`,p={observe:r,reportProgress:o?.reportProgress,withCredentials:o?.withCredentials,context:this.createContextWithClientId(o?.context)};return this.httpClient.get(s,p)}read(t,e,r,o,s){let p=`${this.basePath}/api/v0_public/org/${t}/repo/${e}/history/${r}`,v={observe:o,reportProgress:s?.reportProgress,withCredentials:s?.withCredentials,context:this.createContextWithClientId(s?.context)};return this.httpClient.get(p,v)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var I=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}upsert(t,e,r,o,s){let p=`${this.basePath}/api/v0/org/${t}/repo/${e}/run`,v={observe:o,reportProgress:s?.reportProgress,withCredentials:s?.withCredentials,context:this.createContextWithClientId(s?.context)};return this.httpClient.post(p,r,v)}readMany(t,e,r,o){let s=`${this.basePath}/api/v0_public/org/${t}/repo/${e}/run`,p={observe:r,reportProgress:o?.reportProgress,withCredentials:o?.withCredentials,context:this.createContextWithClientId(o?.context)};return this.httpClient.get(s,p)}read(t,e,r,o,s){let p=`${this.basePath}/api/v0_public/org/${t}/repo/${e}/run/${r}`,v={observe:o,reportProgress:s?.reportProgress,withCredentials:s?.withCredentials,context:this.createContextWithClientId(s?.context)};return this.httpClient.get(p,v)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var w=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}secret(t,e){let r=`${this.basePath}/secured/secret`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.get(r,o)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var k=class n{httpClient=i(b);basePath=i(l);clientContextToken=c;createContextWithClientId(t){return(t||new u).set(this.clientContextToken,"default")}version(t,e){let r=`${this.basePath}/api`,o={observe:t,reportProgress:e?.reportProgress,withCredentials:e?.withCredentials,context:this.createContextWithClientId(e?.context)};return this.httpClient.get(r,o)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var C=class n{httpInterceptors=i(O);clientContextToken=c;intercept(t,e){if(!t.context.has(this.clientContextToken))return e.handle(t);let r=e;return r=this.httpInterceptors.reduceRight((o,s)=>({handle:p=>s.intercept(p,o)}),r),r.handle(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac})};var z=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/;function A(n){if(n==null||typeof n!="object"||n instanceof Date)return n;if(Array.isArray(n))return n.map(t=>A(t));if(typeof n=="object"){let t={};for(let e of Object.keys(n)){let r=n[e];typeof r=="string"&&z.test(r)?t[e]=new Date(r):t[e]=A(r)}return t}return n}var h=class n{intercept(t,e){return e.handle(t).pipe(S(r=>r instanceof F&&r.body?r.clone({body:A(r.body)}):r))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac})};function lr(n){let t=[{provide:l,useValue:n.basePath},{provide:U,useClass:C,multi:!0}];if(n.interceptors&&n.interceptors.length>0){let e=n.interceptors.map(r=>new r);n.enableDateTransform!==!1&&e.unshift(new h),t.push({provide:O,useValue:e})}else n.enableDateTransform!==!1?t.push({provide:O,useValue:[new h]}):t.push({provide:O,useValue:[]});return D(t)}export{M as a,lr as b,R as c};
